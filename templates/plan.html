{% extends "base.html" %}

{% block head %}
<title>Jay Ambe Broadband Service - Plans</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
{% endblock %}

{% block content %}
<section id="plans" class="py-16 bg-gradient-to-b from-[#0f172a] via-[#1a1a1d] to-[#0f172a] text-white">
  <h2 class="text-center text-4xl md:text-5xl font-extrabold text-cyan-400 mb-12 tracking-wide animate-bounce" data-aos="zoom-in">
    ðŸ’¡ Choose Your Plan
  </h2>

  <!-- Responsive Pricing Table -->
  <div class="overflow-x-auto px-4 md:px-10" data-aos="fade-up" data-aos-delay="150">
  <table class="min-w-full border border-cyan-500/30 rounded-2xl shadow-[0_0_20px_rgba(6,182,212,0.25)] overflow-hidden animate-fadeIn bg-slate-900/70 backdrop-blur-lg text-gray-200">
    <!-- Table Header -->
    <thead class="bg-cyan-600/90 text-white text-sm md:text-lg uppercase tracking-wide">
      <tr class="animate-[fadeDown_0.8s_ease-out]">
        <th class="py-4 px-2 md:px-4 text-center">Plan</th>
        <th class="py-4 px-2 md:px-4 text-center">1 Month</th>
        <th class="py-4 px-2 md:px-4 text-center">3 Month</th>
        <th class="py-4 px-2 md:px-4 text-center">6 Month</th>
        <th class="py-4 px-2 md:px-4 text-center">Yearly</th>
        <th class="py-4 px-2 md:px-4 text-center">Payment</th>
      </tr>
    </thead>

    <!-- Table Body -->
    <tbody class="text-center text-sm md:text-base">
      {% for plan, prices in {
        "20 Mbps": [400, 1150, 2300, 4600],
        "40 Mbps": [450, 1300, 2600, 5200],
        "60 Mbps": [500, 1450, 2900, 5800],
        "75 Mbps": [600, 1750, 3500, 7000],
        "100 Mbps": [700, 2000, 4000, 8000],
        "150 Mbps": [900, 2600, 5200, 10400]
      }.items() %}
      <tr class="border-b border-slate-700 hover:bg-slate-800/60 hover:shadow-[0_0_12px_rgba(6,182,212,0.25)] transition-all duration-300 transform hover:scale-[1.015]">
        <td class="py-3 font-semibold text-cyan-300">{{ plan }}</td>
        <td>â‚¹{{ prices[0] }}</td>
        <td>â‚¹{{ prices[1] }}</td>
        <td>â‚¹{{ prices[2] }}</td>
        <td>â‚¹{{ prices[3] }}</td>
        <td>
          <button onclick="payNow(0, '{{ plan }} - Select Plan')"
            class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 md:px-5 py-2 rounded-full hover:shadow-[0_0_15px_rgba(34,197,94,0.5)] hover:scale-110 transform transition duration-300">
            <i class="fa-solid fa-money-bill-wave mr-2"></i>Pay Now
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


  <!-- Animated Info Section -->
  <div class="text-center mt-12 px-4 md:px-0" data-aos="fade-up" data-aos-delay="250">
    <p class="text-gray-300 text-lg md:text-xl font-medium">
      âš¡ All plans come with <span class="text-cyan-400 font-semibold">Unlimited Data</span> and <span class="text-cyan-400 font-semibold">24/7 Support</span>
    </p>
    <p class="text-gray-400 text-sm mt-2">Installation is <span class="text-green-400 font-semibold">FREE</span> for new users!</p>
  </div>

  <!-- Payment Modal -->
  <div id="paymentModal"
    class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 backdrop-blur-sm transition-opacity duration-300">
    <div class="bg-white rounded-2xl shadow-2xl p-6 w-80 text-center relative animate-slideUp">
      <button onclick="closeModal()"
        class="absolute top-3 right-4 text-gray-500 text-2xl font-bold hover:text-[#6f2232] transition">&times;</button>
      <h3 id="selectedPlan" class="text-2xl font-semibold mb-4 text-[#6f2232]"></h3>
      <p class="text-gray-600 mb-4">Select your preferred duration:</p>
      <div id="durationOptions" class="space-y-3"></div>
    </div>
  </div>
</section>

<!-- Scripts -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  AOS.init({ once: true, duration: 800, offset: 100 });

  const planPrices = {
    "20 Mbps": { "1 Month": 400, "3 Month": 1150, "6 Month": 2300, "Yearly": 4600 },
    "40 Mbps": { "1 Month": 450, "3 Month": 1300, "6 Month": 2600, "Yearly": 5200 },
    "60 Mbps": { "1 Month": 500, "3 Month": 1450, "6 Month": 2900, "Yearly": 5800 },
    "75 Mbps": { "1 Month": 600, "3 Month": 1750, "6 Month": 3500, "Yearly": 7000 },
    "100 Mbps": { "1 Month": 700, "3 Month": 2000, "6 Month": 4000, "Yearly": 8000 },
    "150 Mbps": { "1 Month": 900, "3 Month": 2600, "6 Month": 5200, "Yearly": 10400 },
  };

  let currentPlan = "";

  function isMobile() {
    return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  }

  function payNow(amount, planName) {
    currentPlan = planName.split(" - ")[0];
    const modal = document.getElementById("paymentModal");
    const planTitle = document.getElementById("selectedPlan");
    const durationContainer = document.getElementById("durationOptions");

    modal.classList.remove("hidden");
    planTitle.textContent = `${currentPlan} Plan`;
    durationContainer.innerHTML = "";

    for (const [duration, price] of Object.entries(planPrices[currentPlan])) {
      const upiId = "kg2043139-1@okicici";
      const name = "Krish Gupta";
      const note = encodeURIComponent(`${currentPlan} - ${duration} Plan`);
      const upiLink = `upi://pay?pa=${upiId}&pn=${encodeURIComponent(name)}&am=${price}&cu=INR&tn=${note}`;

      const btn = document.createElement("button");
      btn.textContent = `${duration} - â‚¹${price}`;
      btn.className = "block w-full bg-[#6f2232] text-white py-2 rounded-xl hover:bg-[#c3073f] hover:scale-105 transition-all duration-300";
      btn.onclick = () => {
        if (isMobile()) {
          window.location.href = upiLink;
        } else {
          const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(upiLink)}`;
          window.open(qrUrl, "_blank");
        }
      };
      durationContainer.appendChild(btn);
    }
  }

  function closeModal() {
    document.getElementById("paymentModal").classList.add("hidden");
  }
</script>

<style>
  @keyframes fadeIn {
    0% { opacity: 0; transform: translateY(10px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeDown {
    0% { opacity: 0; transform: translateY(-15px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn { animation: fadeIn 0.8s ease-out; }
  /* .animate-[fadeDown_0.8s_ease-out] { animation: fadeDown 0.8s ease-out; } */


  .animate-fadeIn {
    animation: fadeIn 0.8s ease-in-out;
  }

  @keyframes slideUp {
    from { opacity: 0; transform: translateY(50px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .animate-slideUp {
    animation: slideUp 0.4s ease-out;
  }

  /* Mobile Optimizations */
  @media (max-width: 640px) {
    table th, table td {
      padding: 0.5rem !important;
      font-size: 0.85rem;
    }
    #plans h2 {
      font-size: 1.9rem;
    }
  }
</style>
{% endblock %}
